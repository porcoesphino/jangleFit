window.jangleFit={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";var a=new jangleFit.Models.User;a.isInitialised()&&(jangleFit.user=a),jangleFit.plans=new this.Collections.PlanCollection,jangleFit.router=new this.Routers.JanglefitRouter}},$(document).ready(function(){"use strict";$("li.disabled > a:link").on("click",function(a){a.preventDefault()}),$("nav a").on("click",function(){$(this)[0].classList.contains("dropdown-toggle")||$(this).parent()[0].classList.contains("disabled")||($(".navbar").find(".active").removeClass("active"),$("nav.navbar").find(".navbar-collapse.in").removeClass("in").addClass("collapse"),$(this).parent().addClass("active"))}),jangleFit.init()}),this.jangleFit=this.jangleFit||{},this.jangleFit.Templates=this.jangleFit.Templates||{},Handlebars.registerPartial("chart4-ex",Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'Minutes to spend on each exercise: 2, 1, 1, 1, 6.\n\n\nExercise 1\n\nFeet astride, arms upward. Touch floor outside left foot, between feet, press once then outside right foot, circle bend backwards as far as possible, reverse direction after half the number of counts. Do not strain to keep knees straight. Keep arms above head and make full circle, bending backward past vertical each time.\n\n\nExercise 2\n\nBack lying, legs straight, feet together, arms straight overhead. Sit up and touch the toes keeping the arms and legs straight. Use chair to hook feet under only if necessary.\n\n\nExercise 3\n\nFront lying, hands and arms stretched sideways. Lift head, shoulders, arms, chest and both legs as high as possible. Keep legs straight, raise chest and both thighs completely off floor.\n\n\nExercise 4\n\nFront lying, palms of hands flat on floor, approximately 1 foot from ears directly to side of head, Straighten arms to lift body. Chest must touch floor of each completed movement.\n\n\nExercise 5\n\nStationary run - (count a step each time left foot touches floor. Lift feet approximately 4 inches off floor). Every 75 steps do 10 "semi-squat jumps". Repeat this sequence until required number of steps is completed. \nSemi-squat jumps--Drop to a half crouch position with hands on knees and arms straight, keep back as straight as possible, right foot slightly ahead of left. Jump to upright position with body straight and feet leaving floor, Reverse position of feet before landing. Return to half crouch position and repeat.\n'})),this.jangleFit.Templates["app/scripts/templates/404.hbs"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div>\n  <h2 class="text-center">404 Error with the App</h2>\n  <div class="text-center">\n    <p>We think you\'re trying to go somewhere strange.</p>\n    <p>We could be wrong and the error\'s on our side.</p>\n    <p>If so, sorry.</p>\n  </div>\n</div>\n'}),this.jangleFit.Templates["app/scripts/templates/about.hbs"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="text-justify">\n<blockquote class="blockquote-reverse">\n  <p>Everybody has a plan until they get punched in the mouth.</p>\n  <footer>Mike Tyson from <cite title="the Internet somewhere">the Internet somewhere</cite></footer>\n</blockquote>\n\n<ul class="media-list">\n  <li class="media">\n    <img class="media-object pull-right" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 64px; height: 64px;">\n    <div class="media-body">\n      <h4 class="media-heading">What is this?</h4>\n      <p>Something to help me keep a daily exercise routine. I want it to be simple, work offline and help motivate me. I figure it could help others so I\'m releasing it to the public and releasing the code.</p>\n    </div>\n  </li>\n  <li class="media">\n    <img class="media-object pull-right" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 64px; height: 64px;">\n    <div class="media-body">\n      <h4 class="media-heading">Why not use something else?</h4>\n        <p>You know why. Because the alternatives are bloated/complicated or feature-less. I\'m hoping to make something prettier, simpler and more useful (to me).</p>\n    </div>\n  </li>\n  <li class="media">\n    <img class="media-object pull-right" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 64px; height: 64px;">\n    <div class="media-body">\n      <h4 class="media-heading">Why not just exercise?</h4>\n      <p>I do. When I wake up I do a set of sit-ups and push-ups. I think that can be improved on. And sometimes motivation is haaaard.</p>\n    </div>\n  </li>\n  <li class="media">\n    <img class="media-object pull-right" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 64px; height: 64px;">\n    <div class="media-body">\n      <h4 class="media-heading">Surely not you!? How are you not motivated?</h4>\n      <p>These get in my way: Drinking, travelling, living out of cars, staying at friends houses, hitch hiking and a rocking boat.</p>\n    </div>\n  </li>\n  <li class="media">\n    <img class="media-object pull-right" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 64px; height: 64px;">\n    <div class="media-body">\n      <h4 class="media-heading">Okay, what\'s on the roadmap?</h4>\n      <p>Tracking, Seinfield calender, sparkline, 7 minute workout, hackers diet, offline access, centralised database, data export, integration with other services.</p>\n    </div>\n  </li>\n  <li class="media">\n    <img class="media-object pull-right" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 64px; height: 64px;">\n    <div class="media-body">\n      <h4 class="media-heading">Gamification!?? I hate that term!</h4>\n        <p>I know. So do most of my friends ;) Unfortunately I didn\'t use the term. I\'ll fix that.</p>\n    </div>\n  </li>\n</ul>\n\n<div class="alert alert-warning"><strong>Note:</strong> This app will not include anything requiring equipment.</div>\n</div>\n'}),this.jangleFit.Templates["app/scripts/templates/alert.hbs"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div id="alert" class="modal hide fade">\n  <div id="alert-msg" class="modal-body text-center">\n',(f=c.message)?f=f.call(b,{hash:{},data:e}):(f=b.message,f=typeof f===h?f.apply(b):f),g+=i(f)+'\n  </div>\n  <div class="modal-footer">\n    <button type="button" data-dismiss="modal" class="btn btn-primary" data-value="1">Ok</button>\n  </div>\n</div>\n'}),this.jangleFit.Templates["app/scripts/templates/calendar.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a){var b="";return b+='\n	<div class="cal-cell1">'+p(typeof a===o?a.apply(a):a)+"</div>\n	"}function g(a,b){var d,e="";return e+='\n	<div class="cal-row-fluid cal-before-eventlist">\n		',d=c.each.call(a,a.days,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n	</div>\n	"}function h(a,b){var d,e,f="";return f+='\n		<div class="cal-cell1 cal-cell" data-cal-row="-day'+p((d=a.indexBaseOne,typeof d===o?d.apply(a):d))+'">\n			<div class="cal-month-day cal-day-inmonth ',e=c["if"].call(a,a.weekend,{hash:{},inverse:q.noop,fn:q.program(5,i,b),data:b}),(e||0===e)&&(f+=e),f+='">\n				<span class="pull-right" data-cal-date="'+p((d=a.dateString,typeof d===o?d.apply(a):d))+'" data-cal-view="day" data-toggle="tooltip" title="" data-original-title="">'+p((d=a.date,typeof d===o?d.apply(a):d))+"</span>\n				",e=c["if"].call(a,a.weekLabel,{hash:{},inverse:q.noop,fn:q.program(7,j,b),data:b}),(e||0===e)&&(f+=e),f+="\n				",e=c["if"].call(a,a.sessions,{hash:{},inverse:q.noop,fn:q.program(9,k,b),data:b}),(e||0===e)&&(f+=e),f+="\n			</div>\n		</div>\n		"}function i(){return"cal-day-weekend"}function j(a){var b,c="";return c+='\n				<div id="cal-week-box" class="hidden-xs">'+p((b=a.weekLabel,typeof b===o?b.apply(a):b))+"</div>\n				"}function k(a,b){var d,e,f="";return f+='\n				<div class="events-list"\n				data-cal-start="'+p((d=a.startTimestamp,typeof d===o?d.apply(a):d))+'"\n				data-cal-end=" this.endTimestamp }}">\n				',e=c.each.call(a,a.sessions,{hash:{},inverse:q.noop,fn:q.program(10,l,b),data:b}),(e||0===e)&&(f+=e),f+="\n				</div>\n				"}function l(a){var b,c="";return c+='\n					<div data-event-id="'+p((b=a.id,typeof b===o?b.apply(a):b))+'" data-event-class="'+p((b=a.colorClass,typeof b===o?b.apply(a):b))+'" class="pull-left event '+p((b=a.colorClass,typeof b===o?b.apply(a):b))+' " data-toggle="tooltip" title="'+p((b=a.title,typeof b===o?b.apply(a):b))+'" data-original-title="'+p((b=a.longTitle,typeof b===o?b.apply(a):b))+'"></div>\n					'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n="",o="function",p=this.escapeExpression,q=this;return n+='<div class="cal-row-fluid cal-row-head">\n	',m=c.each.call(b,b.dayLabels,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(m||0===m)&&(n+=m),n+='\n	<!-- div class="cal-cell1">Monday</div> -->\n</div>\n<div class="cal-month-box">\n	',m=c.each.call(b,b.weeks,{hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e}),(m||0===m)&&(n+=m),n+="\n</div>"}),this.jangleFit.Templates["app/scripts/templates/home.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <tr>\n      <td><a href="#/today/'+k((d=a.title,typeof d===j?d.apply(a):d))+'">'+k((d=a.title,typeof d===j?d.apply(a):d))+'</a></td>\n      <td><img src="images/sparkline.png" style="width:100%;min-width:100px;height:3ex;padding-right:20px"></td>\n      <td>\n      ',e=c["if"].call(a,a.ladder,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+='\n      <span class="badge '+k((d=a.colorClass,typeof d===j?d.apply(a):d))+'">'+k((d=a.rung,typeof d===j?d.apply(a):d))+"</span>\n      </td>\n    </tr>\n    "}function g(a){var b,c="";return c+='\n      <span class="badge '+k((b=a.colorClass,typeof b===j?b.apply(a):b))+'">'+k((b=a.ladder,typeof b===j?b.apply(a):b))+"</span> -\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<h2 class="text-center">Welcome ',(h=c.givenName)?h=h.call(b,{hash:{},data:e}):(h=b.givenName,h=typeof h===j?h.apply(b):h),i+=k(h)+'!</h2>\n<table class="table">\n  <theader>\n    <tr>\n       <th>Plan</th>\n       <th>History</th>\n       <th>Level</th>\n    </tr>\n  </theader>\n  <tbody>\n    ',h=c.each.call(b,b.progress,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\n  </tbody>\n</table>\n<div id="calendar"></div>\n'}),this.jangleFit.Templates["app/scripts/templates/ladder.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n            <th\n            ",d=c["if"].call(a,a.rowSpan,{hash:{},inverse:o.noop,fn:o.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n            ",d=c["if"].call(a,a.colSpan,{hash:{},inverse:o.noop,fn:o.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n            >"+n((d=a.title,typeof d===m?d.apply(a):d))+"</th>\n            "}function g(a){var b,c="";return c+='\n            rowspan="'+n((b=a.rowSpan,typeof b===m?b.apply(a):b))+'"\n            '}function h(){return'\n            colspan="this.colSpan"\n            '}function i(a,b){var d,e="";return e+="\n          <tr>\n          ",d=c.each.call(a,a.labelsLower,{hash:{},inverse:o.noop,fn:o.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n          <tr>\n          "}function j(a){var b="";return b+="\n            <th>"+n(typeof a===m?a.apply(a):a)+"</th>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l="",m="function",n=this.escapeExpression,o=this;return l+='\n  <div class="panel panel-success">\n    <div class="panel-heading">\n      ',(k=c.planId)?k=k.call(b,{hash:{},data:e}):(k=b.planId,k=typeof k===m?k.apply(b):k),l+=n(k)+": ",(k=c.id)?k=k.call(b,{hash:{},data:e}):(k=b.id,k=typeof k===m?k.apply(b):k),l+=n(k)+'\n    </div>\n    <div class="table-responsive">\n      <table class="table table-striped table-bordered table-condensed">\n        <thead>\n          <tr>\n            ',k=c.each.call(b,b.labelsUpper,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(k||0===k)&&(l+=k),l+="\n          </tr>\n          ",k=c["if"].call(b,b.labelsLower,{hash:{},inverse:o.noop,fn:o.program(6,i,e),data:e}),(k||0===k)&&(l+=k),l+="\n        </thead>\n        <tbody>\n\n          \n\n        </tbody>\n      </table>\n    </div>\n  </div>\n"}),this.jangleFit.Templates["app/scripts/templates/log.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <div class="panel-heading">\n      <a data-toggle="collapse" data-parent="#table-accordian" href="#'+k((d=a.id,typeof d===j?d.apply(a):d))+'">\n        <span>'+k((d=a.timestamp,typeof d===j?d.apply(a):d))+'</span>\n        <span class="pull-right">'+k((d=a.plan,typeof d===j?d.apply(a):d))+": "+k((d=a.ladder,typeof d===j?d.apply(a):d))+" - "+k((d=a.rung,typeof d===j?d.apply(a):d))+'</span>\n      </a>\n    </div>\n    <div id="'+k((d=a.id,typeof d===j?d.apply(a):d))+'" class="panel-collapse collapse">\n      <div class="table-responsive">\n        <table class="table table-striped table-bordered table-condensed">\n          <thead>\n            <tr>\n              <th>Timestamp</th>\n              <th>Activity</th>\n              <th>Duration</th>\n              <th>Count</th>\n            </tr>\n          </thead>\n          <tbody>\n\n            ',e=c.each.call(a,a.sets,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+="\n          </tbody>\n        </table>\n      </div>\n    </div>\n    "}function g(a){var b,c="";return c+="\n            <tr>\n              <td>"+k((b=a.timestamp,typeof b===j?b.apply(a):b))+"</td>\n              <td>"+k((b=a.activity,typeof b===j?b.apply(a):b))+"</td>\n              <td>"+k((b=a.duration,typeof b===j?b.apply(a):b))+"</td>\n              <td>"+k((b=a.amount,typeof b===j?b.apply(a):b))+"</td>\n              <td>"+k((b=a.unit,typeof b===j?b.apply(a):b))+"</td>\n            </tr>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="panel-group" id="table-accordian">\n  <div class="panel panel-success">\n\n    <div class="panel-heading">Logs</div>\n\n    ',h=c.each.call(b,b.sessions,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n\n  </div>\n</div>\n"}),this.jangleFit.Templates["app/scripts/templates/login.hbs"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<h2 class="form-signin-heading text-center">Welcome</h2>\n<!-- Tabbed is awesome!! -->\n<div class="row" style="margin-top:20px;">\n  <ul class="nav nav-tabs col-sm-offset-3 col-sm-6" style="text-align:center">\n    <li class="active" style="float:none; display:inline-block;">\n      <a href="#signup" data-toggle="tab">Sign up</a>\n    </li>\n    <li class="disabled" style="float:none; display:inline-block;">\n      <span style="padding-left:10px;color:gray;">Login</span>\n      <!--<a href="#authenticate" data-toggle="tab">Login</a>-->\n    </li>\n  </ul>\n</div>\n\n<div class="tab-content" style="margin-top:30px;">\n\n  <div class="tab-pane active row" id="signup">\n    <div class="col-sm-offset-3 col-sm-6">\n      <input id="givenName" type="text" class="form-control" placeholder="Given name" required="" autofocus="">\n    </div>\n    <div class="col-sm-offset-3 col-sm-6">\n      <input id="familyName" type="text" class="form-control" placeholder="Family name" required="">\n    </div>\n    <div class="col-sm-offset-3 col-sm-6">\n      <input id="email" type="email" class="form-control" placeholder="Email" required="">\n    </div>\n    <div class="col-sm-offset-3 col-sm-6">\n      <button class="btn btn-primary btn-block" type="submit">Continue</button>\n    </div>\n  </div>\n\n  <div class="tab-pane" id="authenticate">\n    <div class="row">\n      <div class="col-xs-4 col-sm-offset-3 col-sm-2">\n        <a href="#" class="btn btn-primary btn-block">\n          <span>Facebook</span>\n        </a>\n      </div>\n      <div class="col-xs-4 col-sm-2">\n        <a href="#" class="btn btn-primary btn-block">\n          <span>Twitter</span>\n        </a>\n      </div>\n      <div class="col-xs-4 col-sm-2">\n        <a href="#" class="btn btn-primary btn-block">\n          <span>Google+</span>\n        </a>\n      </div>\n    </div>\n\n\n    <div class="row">\n      <div class="col-xs-12 col-sm-offset-3 col-sm-6">\n        <div style="width: 100%; text-align: center; border-bottom: 1px solid #E7E7E7; line-height: 0.1em; margin: 10px 0 20px; margin-top:30px;margin-bottom:30px;">\n          <span style="background:#fff; padding:0 10px; ">OR</span>\n        </div>\n        <form autocomplete="off">\n          <div class="input-group">\n            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>\n            <input type="text" class="form-control" name="username" placeholder="Email Address">\n          </div>\n          <span class="help-block"></span>\n\n          <div class="input-group">\n            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>\n            <input  type="password" class="form-control" name="password" placeholder="Password">\n          </div>\n          <span class="help-block" style="color:transparent;">Password error</span>\n\n          <button class="btn btn-lg btn-primary btn-block" type="submit">Login</button>\n        </form>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-xs-12 col-sm-offset-3 col-sm-3">\n        <label class="checkbox">\n          <input type="checkbox" value="remember-me">Remember Me\n        </label>\n      </div>\n      <div class="col-xs-12 col-sm-3">\n        <p class="omb_forgotPwd" style="margin-top:10px;text-align:right">\n          <a href="#">Forgot Password?</a>\n        </p>\n      </div>\n    </div>\n  </div>\n</div>\n'}),this.jangleFit.Templates["app/scripts/templates/rung.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a){var b="";return b+="\n  <td>"+j(typeof a===i?a.apply(a):a)+"</td>\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+="  <td>",(g=c.level)?g=g.call(b,{hash:{},data:e}):(g=b.level,g=typeof g===i?g.apply(b):g),h+=j(g)+"</td>\n  ",g=c.each.call(b,b.exercises,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h}),this.jangleFit.Templates["app/scripts/templates/session.hbs"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div id="timestamp">',(f=c.timestamp)?f=f.call(b,{hash:{},data:e}):(f=b.timestamp,f=typeof f===h?f.apply(b):f),g+=i(f)+'</div>\n<div class="table-responsive">\n  <table class="table table-striped table-bordered table-condensed">\n    <thead>\n      <tr>\n        <th>Timestamp</th>\n        <th>Activity</th>\n        <th>Duration</th>\n        <th>Amount</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody id="sets">\n\n\n\n    </tbody>\n  </table>\n</div>\n'}),this.jangleFit.Templates["app/scripts/templates/set.hbs"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="  <td>",(f=c.timestamp)?f=f.call(b,{hash:{},data:e}):(f=b.timestamp,f=typeof f===h?f.apply(b):f),g+=i(f)+"</td>\n  <td>",(f=c.activity)?f=f.call(b,{hash:{},data:e}):(f=b.activity,f=typeof f===h?f.apply(b):f),g+=i(f)+"</td>\n  <td>",(f=c.duration)?f=f.call(b,{hash:{},data:e}):(f=b.duration,f=typeof f===h?f.apply(b):f),g+=i(f)+"</td>\n  <td>",(f=c.amount)?f=f.call(b,{hash:{},data:e}):(f=b.amount,f=typeof f===h?f.apply(b):f),g+=i(f)+"</td>\n  <td>",(f=c.unit)?f=f.call(b,{hash:{},data:e}):(f=b.unit,f=typeof f===h?f.apply(b):f),g+=i(f)+"</td>\n"}),this.jangleFit.Templates["app/scripts/templates/settings.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n<div class="panel panel-default">\n  <div class="panel-heading">'+n((d=a.title,typeof d===m?d.apply(a):d))+'</div>\n  <div class="panel-body">\n\n    <div class="form-group">\n      <label class="control-label col-xs-4" for="rung-'+n((d=a.id,typeof d===m?d.apply(a):d))+'">Level</label>\n      <div class="col-xs-8 col-sm-3">\n        <select class="form-control" id="rung-'+n((d=a.id,typeof d===m?d.apply(a):d))+'">\n          ',e=c.each.call(a,a.rungs,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+='\n        </select>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label col-xs-4" for="color-'+n((d=a.id,typeof d===m?d.apply(a):d))+'">Color</label>\n      <div class="col-xs-8 col-sm-3">\n        <select class="form-control" id="color-'+n((d=a.id,typeof d===m?d.apply(a):d))+'">\n          ',e=c.each.call(a,a.colors,{hash:{},inverse:l.noop,fn:l.program(5,i,b),data:b}),(e||0===e)&&(f+=e),f+="\n        </select>\n      </div>\n    </div>\n\n  </div>\n</div>\n"}function g(a,b){var d,e="";return e+="\n          <option ",d=c["if"].call(a,a.selected,{hash:{},inverse:l.noop,fn:l.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+=">"+n((d=a.id,typeof d===m?d.apply(a):d))+"</option>\n          "}function h(){return'selected="selected"'}function i(a,b){var d,e,f="";return f+='\n          <option class="'+n((d=a["class"],typeof d===m?d.apply(a):d))+'" ',e=c["if"].call(a,a.selected,{hash:{},inverse:l.noop,fn:l.program(3,h,b),data:b}),(e||0===e)&&(f+=e),f+=">"+n((d=b,d=null==d||d===!1?d:d.key,typeof d===m?d.apply(a):d))+"</option>\n          "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l=this,m="function",n=this.escapeExpression;return k+='  <h2 class="form-signin-heading text-center">Settings</h2>\n  <div class="form-group">\n    <label for="givenName" class="col-xs-4 control-label">Given Name</label>\n    <div class="input-group col-xs-8">\n      <input id="givenName" type="text" class="form-control" placeholder="Given Name" value="',(j=c.givenName)?j=j.call(b,{hash:{},data:e}):(j=b.givenName,j=typeof j===m?j.apply(b):j),k+=n(j)+'" required="" autofocus="" disabled>\n      <span class="input-group-btn">\n        <button class="btn btn-default" type="button">Edit</button>\n      </span>\n    </div>\n  </div>\n</div>\n<div class="form-group">\n  <label for="familyName" class="col-xs-4 control-label">Family Name</label>\n  <div class="input-group col-xs-8">\n    <input id="familyName" type="text" class="form-control" placeholder="Family Name" required="" value="',(j=c.familyName)?j=j.call(b,{hash:{},data:e}):(j=b.familyName,j=typeof j===m?j.apply(b):j),k+=n(j)+'" disabled>\n    <span class="input-group-btn">\n      <button class="btn btn-default" type="button">Edit</button>\n    </span>\n  </div>\n</div>\n</div>\n<div class="form-group">\n  <label for="email" class="col-xs-4 control-label">Email</label>\n  <div class="col-xs-8">\n    <input type="email" class="form-control" id="email" placeholder="Email" value="',(j=c.email)?j=j.call(b,{hash:{},data:e}):(j=b.email,j=typeof j===m?j.apply(b):j),k+=n(j)+'">\n  </div>\n</div>\n\n\n',j=c.each.call(b,b.progress,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\n"}),this.jangleFit.Templates["app/scripts/templates/table.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(){return"\n        <th>this</th>\n        "}function g(a,b){var d,e="";return e+="\n      <tr>\n        ",d=c.each.call(a,a.cols,{hash:{},inverse:j.noop,fn:j.program(1,f,b),data:b}),(d||0===d)&&(e+=d),e+="\n      </tr>\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j=this;return i+='<div class="table-responsive">\n  <table class="table table-striped table-bordered table-condensed">\n    <thead>\n      <tr>\n        ',h=c.each.call(b,b.headers,{hash:{},inverse:j.noop,fn:j.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n      </tr>\n    </thead>\n    <tbody>\n      ",h=c.each.call(b,b.rows,{hash:{},inverse:j.noop,fn:j.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+="\n    </tbody>\n  </table>\n</div>\n"}),this.jangleFit.Templates["app/scripts/templates/today.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n              ",d=c["if"].call(a,a.isCombo,{hash:{},inverse:p.program(6,j,b),fn:p.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n              "}function g(a,b){var d,e,f="";return f+="\n              <th>"+r((d=a.label,typeof d===q?d.apply(a):d))+'<select id="select-'+r((d=b,d=null==d||d===!1?d:d.index,typeof d===q?d.apply(a):d))+'" class="pull-right exercise-selector">\n              ',e=c.each.call(a,a.options,{hash:{},inverse:p.noop,fn:p.program(3,h,b),data:b}),(e||0===e)&&(f+=e),f+="\n              </select></th>\n              "}function h(a,b){var d,e="";return e+="\n              <option ",d=c["if"].call(a,a.selected,{hash:{},inverse:p.noop,fn:p.program(4,i,b),data:b}),(d||0===d)&&(e+=d),e+=">"+r((d=a.name,typeof d===q?d.apply(a):d))+"</option>\n              "}function i(){return'selected="selected"'}function j(a){var b,c="";return c+="\n              <th>"+r((b=a.label,typeof b===q?b.apply(a):b))+"</th>\n              "}function k(a,b){var d,e,f="";return f+="\n            <tr>\n              <td>"+r((d=a.label,typeof d===q?d.apply(a):d))+"</td>\n              ",e=c.each.call(a,a.exercises,{hash:{},inverse:p.noop,fn:p.program(9,l,b),data:b}),(e||0===e)&&(f+=e),f+="\n            </tr>\n      "}function l(a){var b="";return b+="\n              <td>"+r(typeof a===q?a.apply(a):a)+"</td>\n              "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n,o="",p=this,q="function",r=this.escapeExpression;return o+='<div class="panel-group">\n  <div class="panel panel-success">\n    <div class="panel-heading">\n       ',(m=c.title)?m=m.call(b,{hash:{},data:e}):(m=b.title,m=typeof m===q?m.apply(b):m),o+=r(m)+": ",(m=c.ladder)?m=m.call(b,{hash:{},data:e}):(m=b.ladder,m=typeof m===q?m.apply(b):m),o+=r(m)+" - ",(m=c.rung)?m=m.call(b,{hash:{},data:e}):(m=b.rung,m=typeof m===q?m.apply(b):m),o+=r(m)+'\n    </div>\n    <div id="panel-content">\n      <div class="table-responsive">\n        <table class="table table-striped table-bordered table-condensed">\n          <thead>\n            <tr>\n              <th></th>\n              ',m=c.each.call(b,b.exerciseLabels,{hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e}),(m||0===m)&&(o+=m),o+="\n            </tr>\n          </thead>\n          <tbody>\n\n      ",m=c.each.call(b,b.rows,{hash:{},inverse:p.noop,fn:p.program(8,k,e),data:e}),(m||0===m)&&(o+=m),o+='\n\n          </tbody>\n      </table>\n    </div>\n    <div class="jumbotron">\n      <p>Congratulations!</p>\n      <p>You\'re up to\n        <span class="badge '+r((m=b.colorClass,typeof m===q?m.apply(b):m))+'" style="font-size:inherit;">',(n=c.ladder)?n=n.call(b,{hash:{},data:e}):(n=b.ladder,n=typeof n===q?n.apply(b):n),o+=r(n)+'</span>\n        <span class="badge '+r((m=b.colorClass,typeof m===q?m.apply(b):m))+'" style="font-size:inherit;">',(n=c.rung)?n=n.call(b,{hash:{},data:e}):(n=b.rung,n=typeof n===q?n.apply(b):n),o+=r(n)+'</span>\n      </p>\n    <button id="start-btn" class="btn btn-default">Let\'s Start!</button>\n  </div>\n</div>\n'}),this.jangleFit.Templates["app/scripts/templates/training.hbs"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="panel-group">\n  <div class="panel panel-success">\n    <div class="panel-heading">\n       ',(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b.title,f=typeof f===h?f.apply(b):f),g+=i(f)+": ",(f=c.ladder)?f=f.call(b,{hash:{},data:e}):(f=b.ladder,f=typeof f===h?f.apply(b):f),g+=i(f)+" - ",(f=c.rung)?f=f.call(b,{hash:{},data:e}):(f=b.rung,f=typeof f===h?f.apply(b):f),g+=i(f)+'\n      </p>\n    </div>\n    <div id="panel-content">\n\n      <div class="jumbotron">\n        <div id="update">\n          <h2 class="text-center">Let\'s Go!</h2>\n          <h2 id="timer" class="text-center">0</h2>\n          <div class="input-group">\n            <span class="input-group-addon" id="activity">Activity</span>\n            <input type="number" class="form-control" placeholder="Reps" id="reps" step="1" min="0">\n            <div class="input-group-btn">\n              <button id="next-btn" type="button" class="btn btn-default" tabindex="-1"></button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div id="session"></div>\n\n   </div>\n  </div>\n</div>\n'}),jangleFit.Collections=jangleFit.Collections||{},function(){"use strict";jangleFit.Collections.RungCollection=Backbone.Collection.extend({initialize:function(){this.model=jangleFit.Models.Rung}})}(),jangleFit.Collections=jangleFit.Collections||{},function(){"use strict";jangleFit.Collections.LadderCollection=Backbone.Collection.extend({initialize:function(){this.model=jangleFit.Models.Ladder}})}(),jangleFit.Collections=jangleFit.Collections||{},function(){"use strict";jangleFit.Collections.PlanCollection=Backbone.Collection.extend({initialize:function(){this.model=jangleFit.Models.Plan,this.add({title:"5BX",exercises:["Stretching","Sit-up","Back extension","Push-up",["Run","Stationary Run","One Mile Run","One Mile Walk"]],rungLabel:"Level",ladders:{"Chart 4":{ladder:[["A+",30,22,50,42,400,7,19],["A",30,22,49,40,395,7,19],["A-",30,22,49,37,390,7,19],["B+",28,21,47,34,380,7.25,19],["B",28,21,46,32,375,7.25,20],["B-",28,21,46,30,365,7.25,20],["C+",26,19,44,28,355,7.5,21],["C",26,19,43,26,345,7.5,21],["C-",26,19,43,24,335,7.5,21],["D+",24,18,41,21,325,7.75,23],["D",24,18,40,19,315,7.75,23],["D-",24,18,40,17,300,7.75,23]]}}}),this.getFromDisk()
},getFromDisk:function(){var a=this;jQuery.get("lifetime.md",function(b){var c,d,e=b.split("\n"),f=function(a){a||""===a?h.notes+=a+"\n":h.notes=h.notes.trim()},g=function(a,b){var c,d=h.ladders[a];b||""===b?"### "===b.substring(0,4)?(c=b.substring(4),d.rungLabel?d.exercises.push(c):d.rungLabel=c):d.rungLabel||(c=b.split("	"),d.ladder.push(c)):d.ladder.reverse()},h={title:e[0].substring(2),notes:"",ladders:{}};e.shift(),_.each(e,function(a){if(a)if("## "===a.substring(0,3))switch(d&&d(),c=a.substring(3)){case"Notes":d=f;break;default:h.ladders[c]={exercises:[],ladder:[]},d=g.bind(null,c)}else d&&d(a)}),d(),a.add(h)})}})}(),jangleFit.Collections=jangleFit.Collections||{},function(){"use strict";jangleFit.Collections.SetCollection=Backbone.Collection.extend({initialize:function(){this.model=jangleFit.Models.Set}})}(),jangleFit.Collections=jangleFit.Collections||{},function(){"use strict";jangleFit.Collections.ProgressCollection=Backbone.Collection.extend({initialize:function(){this.model=jangleFit.Models.Progress}})}(),jangleFit.Collections=jangleFit.Collections||{},function(){"use strict";jangleFit.Collections.SessionCollection=Backbone.Collection.extend({initialize:function(){this.model=jangleFit.Models.Session,this.localStorage=new Backbone.LocalStorage(jangleFit.storePrefix+"-sessions")},fetchAll:function(){this.fetch(),this.each(function(a){a.get("sets").forEach(function(b){var c=new jangleFit.Models.Set({id:b});c.fetch(),a.collection.add(c)})})}})}(),jangleFit.Models=jangleFit.Models||{},function(){"use strict";jangleFit.Models.Rung=Backbone.Model.extend({initialize:function(){this.set("id",this.get("level"))}})}(),jangleFit.Models=jangleFit.Models||{},function(){"use strict";jangleFit.Models.Ladder=Backbone.Model.extend({initialize:function(){this.localStorage=new Backbone.LocalStorage(jangleFit.storePrefix+"-ladder"),this.collection=new jangleFit.Collections.RungCollection;var a=this.get("ladder").map(function(a){return{level:a[0],exercises:a.filter(function(a,b){return b>0})}});this.collection.add(a)},getRungHighest:function(){return this.collection.first().clone()},getRung:function(a,b){var c=this.collection.get(a),d=this.collection.indexOf(c);return b="undefined"!=typeof b?b:0,this.collection.models[d+b].clone()}})}(),jangleFit.Models=jangleFit.Models||{},function(){"use strict";jangleFit.Models.Plan=Backbone.Model.extend({initialize:function(){var a=new jangleFit.Collections.LadderCollection,b=this.get("title"),c=this.get("exercises"),d=this.get("rungLabel");this.id=b,this.localStorage=new Backbone.LocalStorage(jangleFit.storePrefix+"-ladder"),this.collection=a,_.each(this.get("ladders"),function(e,f){var g=e.exercises,h=e.rungLabel;g||(g=c),h||(h=d),a.add(new jangleFit.Models.Ladder({id:f,planId:b,rungLabel:h,exercises:g,ladder:e.ladder}))})},getLadder:function(a){return this.collection.get(a)}})}(),jangleFit.Models=jangleFit.Models||{},function(){"use strict";jangleFit.Models.Progress=Backbone.Model.extend({initialize:function(){this.set("id",this.get("title")),this.localStorage=new Backbone.LocalStorage(jangleFit.store)},getPlan:function(){return jangleFit.plans.get(this.get("title"))},getLadderName:function(){return this.get("ladder")},setLadderName:function(a){return this.set("ladder",a)},getLadder:function(){var a=this.getPlan();return a?a.getLadder(this.getLadderName()):void 0},getRemovedIndices:function(a){var b,c,d,e,f=[],g=a.get("exercises"),h=0;for(b=0;b<g.length;b++)if(Array.isArray(g[b])){for(e=this.get("select-"+b)+1,d=g[b].length,c=1;d>c;c++)c!==e&&f.push(h+c-1);h+=d-1}else h++;return f},removeColumns:function(a,b){var c=0,d=b[c];return a.set("exercises",a.get("exercises").filter(function(a,e){var f=e!==d;return f||(c++,d=c<b.length?b[c]:void 0),f})),a},getRungName:function(){return this.get("rung")},setRungName:function(a){return this.set("rung",a)},getRungHighest:function(a){var b,c=this.getLadder();return c?(b=c.getRungHighest(),a&&(b=this.removeColumns(b,this.getRemovedIndices(c))),b):void 0},getRung:function(a,b,c){var d,e=this.getLadder();return e?(a="undefined"!=typeof a?a:this.getRungName(),d=e.getRung(a,b),c&&(d=this.removeColumns(d,this.getRemovedIndices(e))),d):void 0},getColors:function(){return{Red:{"class":"event-important"},Black:{"class":"event-inverse"},Grey:{"class":""},Purple:{"class":"event-special"},Yellow:{"class":"event-warning"},Blue:{"class":"event-info"},Green:{"class":"event-success"}}},getColorName:function(){return this.get("color")},getColorClass:function(){var a=this.getColors()[this.getColorName()];return a?a.class:void 0},setColor:function(a){var b=this.set("color",a);return b},toViewJSON:function(){var a=this.toJSON();return a.colorClass=this.getColorClass(),a}})}(),jangleFit.Models=jangleFit.Models||{},function(){"use strict";jangleFit.Models.Set=Backbone.Model.extend({defaults:{activity:"",duration:0,amount:0,unit:"times"},initialize:function(){this.localStorage=new Backbone.LocalStorage(jangleFit.storePrefix+"-sets"),this.set("timestamp",this.id)}})}(),jangleFit.Models=jangleFit.Models||{},function(){"use strict";jangleFit.Models.Session=Backbone.Model.extend({initialize:function(){this.localStorage=new Backbone.LocalStorage(jangleFit.storePrefix+"-sessions"),this.set("timestamp",this.id),this.collection=new jangleFit.Collections.SetCollection},saveAll:function(){_.each(this.collection.models,function(a){a.save()}),this.save()},addSet:function(a){var b="sets",c=this.get(b);c||(c=[]),c.push(a.id),this.set(b,c),this.collection.add(a)}})}(),jangleFit.Models=jangleFit.Models||{},function(){"use strict";jangleFit.Models.User=Backbone.Model.extend({id:"user",defaults:{progress:[{title:"5BX",ladder:"Chart 4",rung:"D-"},{title:"Hackers",ladder:"Lifetime Ladder",rung:"16"}]},addProgress:function(a){this.collection||(this.collection=new jangleFit.Collections.ProgressCollection,this.collection.add(a))},parse:function(a){var b=a.progress||this.get("progress");return this.unset("progress",{silent:!0}),delete a.progress,this.addProgress(b),a},toJSON:function(){var a=Backbone.Model.prototype.toJSON.call(this);return a.progress=this.collection.models.map(function(a){return a.toJSON()}),a},toViewJSON:function(){var a=Backbone.Model.prototype.toJSON.call(this);return a.progress=this.collection.models.map(function(a){return a.toViewJSON()}),a},initialize:function(){this.localStorage=new Backbone.LocalStorage("janglefit"),this.fetch(),this.on("change",this.localSave,this)},localSave:function(){this.save()},isInitialised:function(){return this.get("givenName")&&this.get("familyName")},getProgress:function(a){return this.collection.get(a)},getHistory:function(){return this.sessions||(this.sessions=new jangleFit.Collections.SessionCollection,this.sessions.fetchAll()),this.sessions}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.ProgressView=Backbone.View.extend({template:jangleFit.Templates["app/scripts/templates/progress.hbs"],initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this.addProgress(),this},addProgress:function(){var a=new jangleFit.Views.RungView({model:this.model});this.$el.find("tbody").append(a.render().el)}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.CalendarView=Backbone.View.extend({className:"cal-context",attributes:{style:"width:100%"},template:jangleFit.Templates["app/scripts/templates/calendar.hbs"],initialize:function(){this.render()},getDayString:function(a){switch(a){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}},getDateWithOffset:function(a){var b=new Date;return b.getDate-a>0?b.setDate(b.getDate()-a):void 0},render:function(){for(var a,b=function(a){return 0===a.getDay()||6===a.getDay()},c=function(a){var b=a.getFullYear()+"-",c=a.getMonth();return 10>c&&(b+="0"),b+=c+"-",c=a.getDate(),10>c&&(b+="0"),b+=c},d=function(a){var b,c=jangleFit.user.getHistory(),d=new Date(a),e=[];return d.setDate(d.getDate()+1),d.setMilliseconds(-1),b=c.filter(function(b){var c=b.get("timestamp");return a.getTime()<c&&c<d.getTime()}),_.forEach(b,function(a){e.push({id:a.id,colorClass:jangleFit.user.getProgress(a.get("plan")).getColorClass(),title:"",longTitle:""})}),e},e={dayLabels:[],weeks:[{weekLabel:"This"},{weekLabel:"Last"}]},f=new Date;e.dayLabels.length<7;)e.dayLabels.push(this.getDayString(f.getDay())),f.setDate(f.getDate()-1);return f=new Date,f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0),e.weeks.forEach(function(e){for(e.days=[];e.days.length<7;)a={date:f.getDate(),dateString:c(f),sessions:d(f)},e.weekLabel&&(a.weekLabel=e.weekLabel,delete e.weekLabel),b(f)&&(a.weekend=!0),e.days.push(a),f.setDate(f.getDate()-1)}),this.$el.html(this.template(e)),this}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.RungView=Backbone.View.extend({tagName:"tr",className:"rung",template:jangleFit.Templates["app/scripts/templates/rung.hbs"],initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.LadderView=Backbone.View.extend({template:jangleFit.Templates["app/scripts/templates/ladder.hbs"],initialize:function(){this.render()},render:function(){var a,b,c,d=this.model.toJSON();for(d.labelsUpper=[{title:d.rungLabel,rowSpan:2}],a=0;a<d.exercises.length;a++)if(c=d.exercises[a],Array.isArray(c))for(d.labelsLower||(d.labelsLower=[]),d.labelsUpper.push({title:c[0],colSpan:c.length-1,rowSpan:1}),b=1;b<c.length;b++)d.labelsLower.push(c[b]);else d.labelsUpper.push({title:c,rowSpan:2});if(!d.labelsLower)for(a=0;a<d.labelsUpper.length;a++)delete d.labelsUpper[a].rowSpan;return this.$el.html(this.template(d)),this.addRungs(),this},addRung:function(a){var b=new jangleFit.Views.RungView({model:a});this.$el.find("tbody").append(b.render().el)},addRungs:function(){this.model.collection.each(this.addRung,this)}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.LoginView=Backbone.View.extend({tagName:"form",className:"form-login center-block",attributes:{role:"form"},template:jangleFit.Templates["app/scripts/templates/login.hbs"],initialize:function(){this.render()},events:{submit:"createUser"},render:function(){return this.$el.html(this.template()),this},getIfValid:function(a){return a[0].checkValidity()?a.val().trim():void 0},createUser:function(a){a.preventDefault();var b=this.getIfValid(this.$("#givenName")),c=this.getIfValid(this.$("#familyName")),d=this.getIfValid(this.$("#email"));b&&c&&d&&(this.model=new jangleFit.Models.User({givenName:b,familyName:c,email:d}),this.model.save(),jangleFit.user=this.model,jangleFit.router.navigate("#/",{trigger:!0}))}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.LogView=Backbone.View.extend({template:jangleFit.Templates["app/scripts/templates/log.hbs"],initialize:function(){this.model=jangleFit.user.getHistory(),this.render()},render:function(){var a=[],b=function(a){return 10>a?"0"+a:""+a};jangleFit.user.sessions.each(function(c){var d=new Date(c.get("timestamp")),e=d.getFullYear()+"-"+b(d.getMonth())+"-"+b(d.getDate())+" "+b(d.getHours())+":"+b(d.getMinutes())+":"+b(d.getSeconds());a.push({id:c.id,timestamp:e,plan:c.get("plan"),ladder:c.get("ladder"),rung:c.get("rung"),sets:c.collection.map(function(a){var b=a.toJSON();return b.timestamp=new Date(b.timestamp).toLocaleTimeString(),b})})});var c={sessions:a};return this.$el.html(this.template(c)),this}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.SettingsView=Backbone.View.extend({tagName:"form",className:"form-horizontal center-block",attributes:{role:"form"},template:jangleFit.Templates["app/scripts/templates/settings.hbs"],events:{"change input":"fieldChanged","change select":"selectChanged"},initialize:function(){this.listenTo(jangleFit.user,"change",this.render),this.render()},render:function(){var a=jangleFit.user.toJSON();return a.progress.forEach(function(a){var b,c=jangleFit.user.getProgress(a.id),d=c.get("color");c&&(b=c.getLadder(),b&&(a.rungs=b.collection.map(function(a){var b={id:a.id};return b.id===c.getRungName()&&(b.selected=!0),b}),a.colors=c.getColors(),d&&(a.colors[d].selected="selected")))}),this.$el.html(this.template(a)),this},selectChanged:function(a){var b=$(a.currentTarget),c=$("option:selected",b).val(),d=b.attr("id"),e=d.indexOf("-"),f=d.substring(0,e),g=d.substring(e+1),h={};switch(h[d]=c,f){case"rung":jangleFit.user.getProgress(g).setRungName(c),jangleFit.user.save();break;case"color":jangleFit.user.getProgress(g).setColor(c),jangleFit.user.save()}},fieldChanged:function(a){var b,c=$(a.currentTarget),d=c.parent().parent();c[0].checkValidity()?(b={},b[c.attr("id")]=c.val(),jangleFit.user.set(b),d[0].classList.remove("has-error")):d[0].classList.add("has-error")}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.TrainingView=Backbone.View.extend({template:jangleFit.Templates["app/scripts/templates/training.hbs"],events:{"click button#next-btn":"nextHandler"},initialize:function(){this.rung=this.model.getRung(),this.render(),this.$reps=this.$el.find("#reps"),this.session=new jangleFit.Models.Session({id:$.now(),plan:this.model.get("title"),ladder:this.model.get("ladder"),rung:this.model.get("rung")}),this.progress=new jangleFit.Views.SessionView({el:this.$el.find("#session")[0],model:this.session}),this.exNo=0,this.count="",this.renderPanel(),this.startSet(),this.counterStart()},close:function(){this.counterStop()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},counterStart:function(){this.counter=setInterval(this.countDown.bind(this),1e3)},counterStop:function(){window.clearInterval(this.counter)},countDown:function(){isNaN(this.count)||(this.count=this.count-1,this.updateCounter())},updateCounter:function(){var a="text-danger",b=this.$el.find("#timer");b.text(this.count),this.count<0?b.addClass(a):b.removeClass(a)},currentInterval:function(){var a=[2,1,1,1,6];return 60*a[this.exNo]},durationCompleted:function(){return this.currentInterval()-this.count},startSet:function(){this.setCurrent=new jangleFit.Models.Set({id:$.now(),activity:this.currentActivity()}),this.session.addSet(this.setCurrent)},nextHandler:function(a){a.preventDefault(),this.state?(this.setCurrent&&this.setCurrent.set("amount",this.$reps.val()),this.nextExercise()&&(this.state=0,this.startSet(),this.counterStart()),this.renderPanel()):(this.state=1,this.counterStop(),this.renderButton(),this.setCurrent.set("duration",this.durationCompleted()),this.setCurrent.set("amount",this.$reps.val()))},renderButton:function(){var a=this.$el.find("#next-btn"),b="Done!";a.text()===b&&(b="Next!"),a.text(b)},currentActivity:function(){var a=["Stretching","Sit-up","Extension","Push-up","Run"];return a[this.exNo]},renderPanel:function(){this.renderButton(),this.$el.find("#activity").text(this.currentActivity()),this.rung&&this.$reps.val(this.rung.get("exercises")[this.exNo]),this.count=this.currentInterval(),this.updateCounter()},nextExercise:function(){return this.exNo>=4?(this.counterStop(),this.$el.find(".jumbotron").get(0).innerHTML='<h2 class="text-center">Congratulations!!</h2>',this.session.saveAll(),jangleFit.router.dirty=!1,!1):(this.exNo=this.exNo+1,!0)}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.SetView=Backbone.View.extend({tagName:"tr",template:jangleFit.Templates["app/scripts/templates/set.hbs"],initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.timestamp=new Date(a.timestamp).toLocaleTimeString(),this.$el.html(this.template(a)),this}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.SessionView=Backbone.View.extend({template:jangleFit.Templates["app/scripts/templates/session.hbs"],initialize:function(){this.render(),this.listenTo(this.model,"change",this.render),this.listenTo(this.model.collection,"add",this.addSet)},addSet:function(a){this.$sets||(this.$sets=this.$el.find("#sets")),this.$sets.append(new jangleFit.Views.SetView({model:a}).$el)},render:function(){return this.$el.html(this.template({timestamp:new Date(this.model.get("timestamp")).toString()})),this}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.HomeView=Backbone.View.extend({template:jangleFit.Templates["app/scripts/templates/home.hbs"],initialize:function(){this.render(),this.calendar=new jangleFit.Views.CalendarView({el:this.$el.find("#calendar")[0]})},render:function(){var a=this.model.toViewJSON();return this.$el.html(this.template(a)),this}})}(),jangleFit.Views=jangleFit.Views||{},function(){"use strict";jangleFit.Views.TodayView=Backbone.View.extend({template:jangleFit.Templates["app/scripts/templates/today.hbs"],initialize:function(){this.render()},events:{"click button#start-btn":"startHandler","change select":"selectChanged"},startHandler:function(){jangleFit.router.navigate("#/training/"+this.model.get("title"))},selectChanged:function(a){var b=a.target;this.model.set(b.id,b.selectedIndex),jangleFit.user.save(),this.render()},getRows:function(a){var b=[],c=function(a,c){if(c){var d=c.toJSON();d.label=a,b.push(d)}},d=a.getRung(void 0,0,!0);return c("Highest",a.getRungHighest(!0)),c("Next",a.getRung(d.get("level"),-1,!0)),c("Current",d),b},render:function(){var a=this.model.toViewJSON(),b=this.model,c=b.getLadder();return a.rows=this.getRows(b),a.exerciseLabels=_.map(c.get("exercises"),function(a,c){if(Array.isArray(a)){var d="select-"+c,e=b.get(d);return{isCombo:!0,label:a[0],options:_.map(_.tail(a),function(a,b){var c={name:a,selected:!1};return b===e&&(c.selected=!0),c})}}return{isCombo:!1,label:a}}),this.$el.html(this.template(a)),this}})}(),jangleFit.Routers=jangleFit.Routers||{},function(){"use strict";jangleFit.Routers.JanglefitRouter=Backbone.Router.extend({initialize:function(){_.bindAll(this,"beforeUnload","hashChange"),$(window).on("hashchange",this.hashChange),$(window).on("beforeunload",this.beforeUnload),Backbone.history.start({pushState:!1})},routes:{"(/)":"initial","(/)jangleFit":"initial","(/)janglefit":"initial","(/)today/:plan(/)":"today","(/)training/:plan(/)":"training","(/)settings(/)":"settings","(/)log(/)":"log","(/)about(/)":"about","(/)login(/)":"login","(/)reference/:plan/:ladder(/)":"reference","*notFound":"unknown"},selectMenu:function(){$("nav").find(".active").removeClass("active");var a=window.location.hash;if(!a)return void $("#home").addClass("active");var b=$('ul.nav a[href="'+a+'"]');b.length>0?(b.parent().addClass("active"),b.parents(".dropdown").addClass("active")):$("#home").addClass("active")},goWithMenuUpdate:function(a){this.mainEl||(this.mainEl=$("#jangleFit-app")),this.currentView&&(this.currentView.close&&this.currentView.close(),this.currentView.remove()),this.currentView=a,this.dirty=!1,this.mainEl.html(a.el),this.selectMenu()},unknown:function(){this.goWithMenuUpdate(new Backbone.View({el:jangleFit.Templates["app/scripts/templates/404.hbs"]()}))},reference:function(a,b){var c,d=jangleFit.plans.get(a);d&&(c=d.getLadder(b)),c||this.unknown(),this.goWithMenuUpdate(new jangleFit.Views.LadderView({model:c}))},about:function(){this.goWithMenuUpdate(new Backbone.View({el:jangleFit.Templates["app/scripts/templates/about.hbs"]()}))},login:function(){var a=new jangleFit.Views.LoginView;this.goWithMenuUpdate(a)},updateIfAuth:function(a){var b;jangleFit.user&&jangleFit.user.isInitialised()?(jangleFit.storePrefix="janglefit-"+jangleFit.user.get("givenName").toLowerCase(),b=a()):(b=new jangleFit.Views.LoginView,this.navigate("")),this.goWithMenuUpdate(b)},initial:function(){this.updateIfAuth(function(){return new jangleFit.Views.HomeView({model:jangleFit.user})})},today:function(a){this.updateIfAuth(function(){return new jangleFit.Views.TodayView({model:jangleFit.user.getProgress(a)})})},training:function(a){this.updateIfAuth(function(){return new jangleFit.Views.TrainingView({model:jangleFit.user.getProgress(a)})})},settings:function(){this.updateIfAuth(function(){return new jangleFit.Views.SettingsView})},log:function(){this.updateIfAuth(function(){return new jangleFit.Views.LogView})},hashChange:function(a){if(this.cancelNavigate)return a.stopImmediatePropagation(),void(this.cancelNavigate=!1);if(this.currentView&&this.dirty){var b=confirm("You have unsaved changes. Exit?");if(b===!0)return;a.stopImmediatePropagation(),this.cancelNavigate=!0,window.location.href=a.originalEvent.oldURL,jangleFit.router.selectMenu()}},beforeUnload:function(){return this.currentView&&this.dirty?"You have unsaved changes. Exit?":void 0}})}();